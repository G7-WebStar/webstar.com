<div class="container mt-3">
    <div class="row mb-3">
        <div class="col-12 col-md-6 mb-2 d-flex align-items-center">
            <div class="text-bold text-20 mb-0"> Logo Emblems </div>
            <button type="submit" class="btn rounded-5 text-reg text-12 ms-3"
                style="background-color: var(--primaryColor); border: 1px solid var(--black);">
                Save changes
            </button>
        </div>
        <div class="col-12 text-reg text-14 mb-3" style="text-align: justify;">
            Choose an emblem to display on your profile! You can buy more emblems from the Shop.
        </div>
    </div>
    <!-- Emblem gallery -->
    <div class="row mb-3 align-items-center">
        <!-- Left Arrow -->
        <div class="col-auto d-flex align-items-center">
            <button id="prevBtn"
                class="btn p-0 d-flex align-items-center justify-content-center rounded-circle border-0"
                style="width: 40px; height: 40px; background: transparent; color: var(--black);">
                <span class="material-symbols-outlined" style="font-size: 30px;">arrow_back_ios</span>
            </button>
        </div>

        <!-- Gallery -->
        <div class="col position-relative w-100 overflow-hidden" style="height: 180px;">
            <div id="carouselWrapper" style="overflow: hidden; width: 100%;">
                <div id="thumbnailCarousel" style="display: flex; transition: transform 0.6s ease;">
                    <!-- ITEMS -->
                    <div class="emblem-item"
                        style="flex: 0 0 180px; margin-right: 10px; height: 160px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--primaryColor); border-radius: 10px; background: white; padding: 8px; cursor: pointer;">
                        <img src="shared/assets/img/logo-emblems/badge 2.png" style="height:150px; object-fit:contain;">
                    </div>

                    <div class="emblem-item"
                        style="flex: 0 0 180px; margin-right: 10px; height: 160px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--primaryColor); border-radius: 10px; background: white; padding: 8px; cursor: pointer;">
                        <img src="shared/assets/img/logo-emblems/bsit.png" style="height:150px; object-fit:contain;">
                    </div>

                    <div class="emblem-item"
                        style="flex: 0 0 180px; margin-right: 10px; height: 160px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--primaryColor); border-radius: 10px; background: white; padding: 8px; cursor: pointer;">
                        <img src="shared/assets/img/logo-emblems/bsitlog 1.png"
                            style="height:150px; object-fit:contain;">
                    </div>

                    <div class="emblem-item"
                        style="flex: 0 0 180px; margin-right: 10px; height: 160px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--primaryColor); border-radius: 10px; background: white; padding: 8px; cursor: pointer;">
                        <img src="shared/assets/img/logo-emblems/comsoc.png" style="height:150px; object-fit:contain;">
                    </div>

                    <div class="emblem-item"
                        style="flex: 0 0 180px; margin-right: 10px; height: 160px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--primaryColor); border-radius: 10px; background: white; padding: 8px; cursor: pointer;">
                        <img src="shared/assets/img/logo-emblems/crammer club 1.png"
                            style="height:150px; object-fit:contain;">
                    </div>

                    <div class="emblem-item"
                        style="flex: 0 0 180px; margin-right: 10px; height: 160px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--primaryColor); border-radius: 10px; background: white; padding: 8px; cursor: pointer;">
                        <img src="shared/assets/img/logo-emblems/crammer club 2.png"
                            style="height:150px; object-fit:contain;">
                    </div>

                    <div class="emblem-item"style="flex: 0 0 180px; margin-right: 10px; height: 160px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--primaryColor); border-radius: 10px; background: white; padding: 8px; cursor: pointer;">
                        <img src="shared/assets/img/logo-emblems/logo.png" style="height:150px; object-fit:contain;">
                    </div>

                    <div class="emblem-item"
                        style="flex: 0 0 180px; margin-right: 10px; height: 160px; display: flex; align-items: center; justify-content: center; border: 2px solid var(--primaryColor); border-radius: 10px; background: white; padding: 8px; cursor: pointer;">
                        <img src="shared/assets/img/logo-emblems/webstar univ 1.png"
                            style="height:150px; object-fit:contain;">
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Arrow -->
        <div class="col-auto d-flex align-items-center">
            <button id="nextBtn"
                class="btn p-0 d-flex align-items-center justify-content-center rounded-circle border-0"
                style="width: 40px; height: 40px; background: transparent; color: var(--black);">
                <span class="material-symbols-outlined" style="font-size: 30px;">arrow_forward_ios</span>
            </button>
        </div>
    </div>


    <!-- Cover Photo -->
    <div class="row mb-3">
        <div class="col-12 col-md-6 mb-2 d-flex align-items-center">
            <div class="text-bold text-20 mb-0"> Cover Photo </div>
            <button type="submit" class="btn rounded-5 text-reg text-12 ms-3"
                style="background-color: var(--primaryColor); border: 1px solid var(--black);">
                Save changes
            </button>
        </div>
        <div class="col-12 text-reg text-14 mb-3"
            style="white-space: normal; word-wrap: break-word; text-align: justify;">
            Choose a cover photo that reflects your style. You can unlock more designs from the Shop.
        </div>
    </div>

    <!-- Pictures -->
    <div class="row mb-3">
        <div class="col"></div>
    </div>

    <!-- Profile Picture -->
    <div class="row mb-3">
        <div class="col-12 col-md-6 mb-2 d-flex align-items-center">
            <div class="text-bold text-20 mb-0"> Moving Profile Picture </div>
            <button type="submit" class="btn rounded-5 text-reg text-12 ms-3"
                style="background-color: var(--primaryColor); border: 1px solid var(--black);">
                Save changes
            </button>
        </div>
        <div class="col-12 text-reg text-14 mb-3"
            style="white-space: normal; word-wrap: break-word; text-align: justify;">
            Select a moving profile picture to bring your profile to life. More animated styles are available in the
            Shop.
        </div>
    </div>
</div>

<script>
    (function () {
        const carousel = document.getElementById("thumbnailCarousel");
        const items = document.querySelectorAll(".emblem-item");
        const prevBtn = document.getElementById("prevBtn");
        const nextBtn = document.getElementById("nextBtn");

        let currentIndex = 0;
        const itemWidth = 300; // width per item (adjust to match your design)

        function updateCarousel() {
            const wrapper = document.querySelector('#carouselWrapper');
            const visibleCount = Math.floor(wrapper.offsetWidth / itemWidth);
            const maxIndex = Math.max(0, items.length - visibleCount);

            // clamp
            if (currentIndex < 0) currentIndex = 0;
            if (currentIndex > maxIndex) currentIndex = maxIndex;

            // move carousel
            const offset = currentIndex * itemWidth;
            carousel.style.transform = `translateX(-${offset}px)`;

            // hide arrows completely if not needed
            if (items.length <= visibleCount) {
                prevBtn.style.display = "none";
                nextBtn.style.display = "none";
            } else {
                prevBtn.style.display = "flex";
                nextBtn.style.display = "flex";
            }

            // gray out / disable
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex === maxIndex;

            prevBtn.style.opacity = currentIndex === 0 ? "0.4" : "1";
            nextBtn.style.opacity = currentIndex === maxIndex ? "0.4" : "1";

            prevBtn.style.cursor = currentIndex === 0 ? "not-allowed" : "pointer";
            nextBtn.style.cursor = currentIndex === maxIndex ? "not-allowed" : "pointer";
        }

        // Button listeners
        prevBtn.addEventListener("click", () => {
            if (currentIndex > 0) {
                currentIndex--;
                updateCarousel();
            }
        });

        nextBtn.addEventListener("click", () => {
            const wrapper = document.querySelector('#carouselWrapper');
            const visibleCount = Math.floor(wrapper.offsetWidth / itemWidth);
            const maxIndex = Math.max(0, items.length - visibleCount);

            if (currentIndex < maxIndex) {
                currentIndex++;
                updateCarousel();
            }
        });

        // Highlight selected emblem
        items.forEach((item) => {
            item.addEventListener("click", () => {
                items.forEach((i) => {
                    i.style.background = "white";
                    i.style.border = "2px solid var(--pureWhite)";
                });
                item.style.background = "var(--primaryColor)";
                item.style.border = "2px solid var(--primaryColor)";
            });
        });

        updateCarousel();
    })();
</script>